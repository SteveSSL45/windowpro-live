{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\steve\\\\windowpro-live\\\\src\\\\Visualizer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport html2canvas from \"html2canvas\";\nimport { Rnd } from \"react-rnd\";\nimport { FaTrash, FaUndo, FaRedo, FaClone, FaLayerGroup, FaExpand, FaMagic } from \"react-icons/fa\";\nimport clay from \"./images/window-clay.png\";\nimport white from \"./images/window-white.png\";\nimport black from \"./images/window-black.png\";\nimport brown from \"./images/window-brown.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst windowImages = [{\n  src: white,\n  label: \"White\"\n}, {\n  src: black,\n  label: \"Black\"\n}, {\n  src: brown,\n  label: \"Brown\"\n}, {\n  src: clay,\n  label: \"Clay\"\n}];\nexport default function Visualizer() {\n  _s();\n  const [background, setBackground] = useState(null);\n  const [elements, setElements] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [future, setFuture] = useState([]);\n  const [selectedId, setSelectedId] = useState(null);\n  const containerRef = useRef(null);\n  const addWindow = src => {\n    const newElement = {\n      id: Date.now(),\n      src,\n      x: 50,\n      y: 50,\n      width: 150,\n      height: 150,\n      z: elements.length\n    };\n    updateHistory([...elements, newElement]);\n  };\n  const updateHistory = newElements => {\n    setHistory([...history, elements]);\n    setElements(newElements);\n    setFuture([]);\n  };\n  const handleBackgroundChange = e => {\n    const reader = new FileReader();\n    reader.onload = () => setBackground(reader.result);\n    reader.readAsDataURL(e.target.files[0]);\n  };\n  const handleExport = () => {\n    if (!containerRef.current) return;\n    html2canvas(containerRef.current).then(canvas => {\n      const link = document.createElement(\"a\");\n      link.download = \"visualization.png\";\n      link.href = canvas.toDataURL();\n      link.click();\n    });\n  };\n  const handleUndo = () => {\n    if (history.length === 0) return;\n    const prev = history[history.length - 1];\n    setFuture([elements, ...future]);\n    setElements(prev);\n    setHistory(history.slice(0, -1));\n  };\n  const handleRedo = () => {\n    if (future.length === 0) return;\n    const next = future[0];\n    setHistory([...history, elements]);\n    setElements(next);\n    setFuture(future.slice(1));\n  };\n  const bringForward = id => {\n    const updated = elements.map(el => el.id === id ? {\n      ...el,\n      z: el.z + 1\n    } : el);\n    updateHistory(updated);\n  };\n  const duplicateElement = id => {\n    const element = elements.find(el => el.id === id);\n    if (!element) return;\n    const copy = {\n      ...element,\n      id: Date.now(),\n      x: element.x + 20,\n      y: element.y + 20\n    };\n    updateHistory([...elements, copy]);\n  };\n  const updateElement = (id, newProps) => {\n    const updated = elements.map(el => el.id === id ? {\n      ...el,\n      ...newProps\n    } : el);\n    setElements(updated);\n  };\n  const removeElement = id => {\n    updateHistory(elements.filter(el => el.id !== id));\n  };\n  const handleFullScreen = () => {\n    if (containerRef.current.requestFullscreen) {\n      containerRef.current.requestFullscreen();\n    }\n  };\n  const handleDetectWindows = async () => {\n    if (!background) return;\n    try {\n      const blob = await fetch(background).then(res => res.blob());\n      const formData = new FormData();\n      formData.append(\"image\", blob, \"background.jpg\");\n      const res = await fetch(\"http://127.0.0.1:5000/detect\", {\n        method: \"POST\",\n        body: formData\n      });\n      const data = await res.json();\n      if (data.windows && Array.isArray(data.windows)) {\n        const detectedWindows = data.windows.map((box, index) => ({\n          id: Date.now() + index,\n          src: white,\n          // Default color (changeable later)\n          x: box.x,\n          y: box.y,\n          width: box.width,\n          height: box.height,\n          z: elements.length + index\n        }));\n        updateHistory([...elements, ...detectedWindows]);\n      }\n    } catch (err) {\n      console.error(\"Detection failed:\", err);\n      alert(\"Window detection failed. Make sure backend is running.\");\n    }\n  };\n  const handleAutoDetect = async () => {\n    if (!background) return alert(\"Please upload a background image first.\");\n    try {\n      const blob = await fetch(background).then(res => res.blob());\n      const formData = new FormData();\n      formData.append(\"image\", blob, \"background.png\");\n      const response = await fetch(\"http://127.0.0.1:5000/detect\", {\n        method: \"POST\",\n        body: formData\n      });\n      const result = await response.json();\n      if (result.processed_image) {\n        setBackground(`data:image/png;base64,${result.processed_image}`);\n      } else {\n        alert(\"No windows detected.\");\n      }\n    } catch (err) {\n      console.error(\"Detection error:\", err);\n      alert(\"Could not reach backend.\");\n    }\n  };\n  useEffect(() => {\n    localStorage.setItem(\"savedDesign\", JSON.stringify(elements));\n  }, [elements]);\n  useEffect(() => {\n    const saved = localStorage.getItem(\"savedDesign\");\n    if (saved) {\n      setElements(JSON.parse(saved));\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-3 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDetectWindows,\n        className: \"px-3 py-2 bg-blue-600 text-white rounded\",\n        children: \"Auto Detect Windows\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleBackgroundChange,\n        accept: \"image/*\",\n        className: \"border rounded p-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), windowImages.map(img => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => addWindow(img.src),\n        className: \"bg-blue-500 text-white px-4 py-2 rounded\",\n        children: [\"Add \", img.label]\n      }, img.label, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUndo,\n        className: \"px-3 py-2 bg-yellow-400 text-white rounded\",\n        children: /*#__PURE__*/_jsxDEV(FaUndo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleRedo,\n        className: \"px-3 py-2 bg-yellow-400 text-white rounded\",\n        children: /*#__PURE__*/_jsxDEV(FaRedo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleExport,\n        className: \"px-3 py-2 bg-green-600 text-white rounded\",\n        children: \"Export Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAutoDetect,\n        className: \"px-3 py-2 bg-pink-600 text-white rounded\",\n        children: [/*#__PURE__*/_jsxDEV(FaMagic, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), \" Auto Detect Windows\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleFullScreen,\n        className: \"px-3 py-2 bg-purple-600 text-white rounded\",\n        children: /*#__PURE__*/_jsxDEV(FaExpand, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: \"relative border-2 border-gray-300 w-full h-[80vh] bg-center bg-cover overflow-hidden\",\n      style: {\n        backgroundImage: `url(${background})`\n      },\n      onClick: () => setSelectedId(null),\n      children: elements.map(el => /*#__PURE__*/_jsxDEV(Rnd, {\n        size: {\n          width: el.width,\n          height: el.height\n        },\n        position: {\n          x: el.x,\n          y: el.y\n        },\n        onDragStop: (e, d) => updateElement(el.id, {\n          x: d.x,\n          y: d.y\n        }),\n        onResizeStop: (e, dir, ref, delta, position) => updateElement(el.id, {\n          width: parseInt(ref.style.width),\n          height: parseInt(ref.style.height),\n          ...position\n        }),\n        style: {\n          zIndex: el.z\n        },\n        bounds: \"parent\",\n        className: `absolute transition-all duration-150 ${selectedId === el.id ? \"border-2 border-blue-500\" : \"border-none\"}`,\n        onClick: e => {\n          e.stopPropagation();\n          setSelectedId(el.id);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: el.src,\n            alt: \"window\",\n            className: \"w-full h-full object-contain\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this), selectedId === el.id && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-1 right-1 flex gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeElement(el.id),\n              children: /*#__PURE__*/_jsxDEV(FaTrash, {\n                className: \"text-red-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => duplicateElement(el.id),\n              children: /*#__PURE__*/_jsxDEV(FaClone, {\n                className: \"text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => bringForward(el.id),\n              children: /*#__PURE__*/_jsxDEV(FaLayerGroup, {\n                className: \"text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this)\n      }, el.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 5\n  }, this);\n}\n_s(Visualizer, \"/q7KBcOlfCRG4Z4j+VsHDJGw5JQ=\");\n_c = Visualizer;\nvar _c;\n$RefreshReg$(_c, \"Visualizer\");","map":{"version":3,"names":["React","useState","useRef","useEffect","html2canvas","Rnd","FaTrash","FaUndo","FaRedo","FaClone","FaLayerGroup","FaExpand","FaMagic","clay","white","black","brown","jsxDEV","_jsxDEV","windowImages","src","label","Visualizer","_s","background","setBackground","elements","setElements","history","setHistory","future","setFuture","selectedId","setSelectedId","containerRef","addWindow","newElement","id","Date","now","x","y","width","height","z","length","updateHistory","newElements","handleBackgroundChange","e","reader","FileReader","onload","result","readAsDataURL","target","files","handleExport","current","then","canvas","link","document","createElement","download","href","toDataURL","click","handleUndo","prev","slice","handleRedo","next","bringForward","updated","map","el","duplicateElement","element","find","copy","updateElement","newProps","removeElement","filter","handleFullScreen","requestFullscreen","handleDetectWindows","blob","fetch","res","formData","FormData","append","method","body","data","json","windows","Array","isArray","detectedWindows","box","index","err","console","error","alert","handleAutoDetect","response","processed_image","localStorage","setItem","JSON","stringify","saved","getItem","parse","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","accept","img","ref","style","backgroundImage","size","position","onDragStop","d","onResizeStop","dir","delta","parseInt","zIndex","bounds","stopPropagation","alt","_c","$RefreshReg$"],"sources":["c:/Users/steve/windowpro-live/src/Visualizer.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport html2canvas from \"html2canvas\";\nimport { Rnd } from \"react-rnd\";\nimport { FaTrash, FaUndo, FaRedo, FaClone, FaLayerGroup, FaExpand, FaMagic } from \"react-icons/fa\";\nimport clay from \"./images/window-clay.png\";\nimport white from \"./images/window-white.png\";\nimport black from \"./images/window-black.png\";\nimport brown from \"./images/window-brown.png\";\n\nconst windowImages = [\n  { src: white, label: \"White\" },\n  { src: black, label: \"Black\" },\n  { src: brown, label: \"Brown\" },\n  { src: clay, label: \"Clay\" },\n];\n\nexport default function Visualizer() {\n  const [background, setBackground] = useState(null);\n  const [elements, setElements] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [future, setFuture] = useState([]);\n  const [selectedId, setSelectedId] = useState(null);\n  const containerRef = useRef(null);\n\n  const addWindow = (src) => {\n    const newElement = {\n      id: Date.now(),\n      src,\n      x: 50,\n      y: 50,\n      width: 150,\n      height: 150,\n      z: elements.length,\n    };\n    updateHistory([...elements, newElement]);\n  };\n\n  const updateHistory = (newElements) => {\n    setHistory([...history, elements]);\n    setElements(newElements);\n    setFuture([]);\n  };\n\n  const handleBackgroundChange = (e) => {\n    const reader = new FileReader();\n    reader.onload = () => setBackground(reader.result);\n    reader.readAsDataURL(e.target.files[0]);\n  };\n\n  const handleExport = () => {\n    if (!containerRef.current) return;\n    html2canvas(containerRef.current).then((canvas) => {\n      const link = document.createElement(\"a\");\n      link.download = \"visualization.png\";\n      link.href = canvas.toDataURL();\n      link.click();\n    });\n  };\n\n  const handleUndo = () => {\n    if (history.length === 0) return;\n    const prev = history[history.length - 1];\n    setFuture([elements, ...future]);\n    setElements(prev);\n    setHistory(history.slice(0, -1));\n  };\n\n  const handleRedo = () => {\n    if (future.length === 0) return;\n    const next = future[0];\n    setHistory([...history, elements]);\n    setElements(next);\n    setFuture(future.slice(1));\n  };\n\n  const bringForward = (id) => {\n    const updated = elements.map((el) =>\n      el.id === id ? { ...el, z: el.z + 1 } : el\n    );\n    updateHistory(updated);\n  };\n\n  const duplicateElement = (id) => {\n    const element = elements.find((el) => el.id === id);\n    if (!element) return;\n    const copy = { ...element, id: Date.now(), x: element.x + 20, y: element.y + 20 };\n    updateHistory([...elements, copy]);\n  };\n\n  const updateElement = (id, newProps) => {\n    const updated = elements.map((el) =>\n      el.id === id ? { ...el, ...newProps } : el\n    );\n    setElements(updated);\n  };\n\n  const removeElement = (id) => {\n    updateHistory(elements.filter((el) => el.id !== id));\n  };\n\n  const handleFullScreen = () => {\n    if (containerRef.current.requestFullscreen) {\n      containerRef.current.requestFullscreen();\n    }\n  };\n\nconst handleDetectWindows = async () => {\n  if (!background) return;\n\n  try {\n    const blob = await fetch(background).then(res => res.blob());\n    const formData = new FormData();\n    formData.append(\"image\", blob, \"background.jpg\");\n\n    const res = await fetch(\"http://127.0.0.1:5000/detect\", {\n      method: \"POST\",\n      body: formData\n    });\n\n    const data = await res.json();\n\n    if (data.windows && Array.isArray(data.windows)) {\n      const detectedWindows = data.windows.map((box, index) => ({\n        id: Date.now() + index,\n        src: white, // Default color (changeable later)\n        x: box.x,\n        y: box.y,\n        width: box.width,\n        height: box.height,\n        z: elements.length + index\n      }));\n\n      updateHistory([...elements, ...detectedWindows]);\n    }\n  } catch (err) {\n    console.error(\"Detection failed:\", err);\n    alert(\"Window detection failed. Make sure backend is running.\");\n  }\n};\n\n\n\n\n\n\n  const handleAutoDetect = async () => {\n    if (!background) return alert(\"Please upload a background image first.\");\n\n    try {\n      const blob = await fetch(background).then((res) => res.blob());\n\n      const formData = new FormData();\n      formData.append(\"image\", blob, \"background.png\");\n\n      const response = await fetch(\"http://127.0.0.1:5000/detect\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      const result = await response.json();\n\n      if (result.processed_image) {\n        setBackground(`data:image/png;base64,${result.processed_image}`);\n      } else {\n        alert(\"No windows detected.\");\n      }\n    } catch (err) {\n      console.error(\"Detection error:\", err);\n      alert(\"Could not reach backend.\");\n    }\n  };\n\n  useEffect(() => {\n    localStorage.setItem(\"savedDesign\", JSON.stringify(elements));\n  }, [elements]);\n\n  useEffect(() => {\n    const saved = localStorage.getItem(\"savedDesign\");\n    if (saved) {\n      setElements(JSON.parse(saved));\n    }\n  }, []);\n\n  return (\n    <div className=\"p-4\">\n      <div className=\"flex flex-wrap gap-3 mb-4\">\n\n\n<button onClick={handleDetectWindows} className=\"px-3 py-2 bg-blue-600 text-white rounded\">\n  Auto Detect Windows\n</button>\n\n\n\n        <input\n          type=\"file\"\n          onChange={handleBackgroundChange}\n          accept=\"image/*\"\n          className=\"border rounded p-2\"\n        />\n        {windowImages.map((img) => (\n          <button\n            key={img.label}\n            onClick={() => addWindow(img.src)}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded\"\n          >\n            Add {img.label}\n          </button>\n        ))}\n        <button onClick={handleUndo} className=\"px-3 py-2 bg-yellow-400 text-white rounded\">\n          <FaUndo />\n        </button>\n        <button onClick={handleRedo} className=\"px-3 py-2 bg-yellow-400 text-white rounded\">\n          <FaRedo />\n        </button>\n        <button onClick={handleExport} className=\"px-3 py-2 bg-green-600 text-white rounded\">\n          Export Image\n        </button>\n        <button onClick={handleAutoDetect} className=\"px-3 py-2 bg-pink-600 text-white rounded\">\n          <FaMagic /> Auto Detect Windows\n        </button>\n        <button onClick={handleFullScreen} className=\"px-3 py-2 bg-purple-600 text-white rounded\">\n          <FaExpand />\n        </button>\n      </div>\n\n      <div\n        ref={containerRef}\n        className=\"relative border-2 border-gray-300 w-full h-[80vh] bg-center bg-cover overflow-hidden\"\n        style={{ backgroundImage: `url(${background})` }}\n        onClick={() => setSelectedId(null)}\n      >\n        {elements.map((el) => (\n          <Rnd\n            key={el.id}\n            size={{ width: el.width, height: el.height }}\n            position={{ x: el.x, y: el.y }}\n            onDragStop={(e, d) => updateElement(el.id, { x: d.x, y: d.y })}\n            onResizeStop={(e, dir, ref, delta, position) =>\n              updateElement(el.id, {\n                width: parseInt(ref.style.width),\n                height: parseInt(ref.style.height),\n                ...position,\n              })\n            }\n            style={{ zIndex: el.z }}\n            bounds=\"parent\"\n            className={`absolute transition-all duration-150 ${selectedId === el.id ? \"border-2 border-blue-500\" : \"border-none\"}`}\n            onClick={(e) => {\n              e.stopPropagation();\n              setSelectedId(el.id);\n            }}\n          >\n            <div className=\"w-full h-full relative\">\n              <img src={el.src} alt=\"window\" className=\"w-full h-full object-contain\" />\n              {selectedId === el.id && (\n                <div className=\"absolute top-1 right-1 flex gap-1\">\n                  <button onClick={() => removeElement(el.id)}>\n                    <FaTrash className=\"text-red-600\" />\n                  </button>\n                  <button onClick={() => duplicateElement(el.id)}>\n                    <FaClone className=\"text-green-600\" />\n                  </button>\n                  <button onClick={() => bringForward(el.id)}>\n                    <FaLayerGroup className=\"text-blue-600\" />\n                  </button>\n                </div>\n              )}\n            </div>\n          </Rnd>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}